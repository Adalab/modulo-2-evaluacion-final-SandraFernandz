"use strict";const button=document.querySelector(".js_button"),givenInput=document.querySelector(".js_input"),ulList=document.querySelector(".js_ulList"),ulListFavs=document.querySelector(".js_ulList2");let series=[],favorites=[];function handleConnectTv(e){let t=givenInput.value.toLowerCase();fetch("https://api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{console.log(e),series=e,console.log(series),paintSeries(),setInLocalStorage()})}function paintSeries(){let e="",t="";for(const i of series){t=isFavorite(i)?"main_ulList_container_li_title":"",e+=`<li class= 'listItem js_listItem \n    main_ulList_container_li ${t}' id='${i.show.id}'>`,console.log(i.show.name),e+="<div main_ulList_container_li_div>",e+=`<h2 class='main_ulList_h2'>${i.show.name}</h2>`,i.show.image?e+=`<img src="${i.show.image.original}" class="main_ulList_container_li_img"/>`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="image of series" class="main_ulList_container_li_img">',e+="</div>",e+="</li>"}ulList.innerHTML=e,console.log(e),listenListedSeries()}function listenListedSeries(){const e=document.querySelectorAll(".js_listItem");for(const t of e)t.addEventListener("click",handleList)}function handleList(e){const t=e.currentTarget.id;console.log(e.currentTarget.id);const i=series.find(e=>e.show.id===parseInt(t)),s=favorites.findIndex(e=>e.show.id===parseInt(t));-1===s?favorites.push(i):favorites.splice(s,1),console.log(favorites),paintSeries(),printFavoriteList(),console.log(t),console.log(s)}function isFavorite(e){return void 0!==favorites.find(t=>t.show.id===e.show.id)}function setInLocalStorage(){const e=JSON.stringify(favorites);localStorage.setItem("favorites",e)}function getLocalStorage(){const e=localStorage.getItem("favorites");if(null===e)handleConnectTv();else{const t=JSON.parse(e);favorites=t,printFavoriteList(),paintSeries()}}function printFavoriteList(){let e="";for(const t of favorites)e+=`<li class= 'listItem js_listItem main_ulList_container_li' id='${t.show.id}'>`,e+=`<h2>${t.show.name}</h2>`,console.log(t.show.name),e+="<div main_ulList_container_li_div>",t.show.image?e+=`<img src="${t.show.image.original}" class="main_ulList_container_li_img"/>`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="image of series" class="main_ulList_container_li_img"/>',e+=`<button id="${t.show.id}" class="js_favButton">X</button>`,e+="</div>",e+="</li>";console.log(e),ulListFavs.innerHTML=e,makeFavClickable(),setInLocalStorage()}function makeFavClickable(){const e=document.querySelectorAll(".js_favButton");for(const t of e)t.addEventListener("click",handleRemoveFavFromFavsList)}button.addEventListener("click",handleConnectTv),getLocalStorage();const favDiv=document.querySelector(".js_div2");function handleRemoveFavFromFavsList(e){let t=parseInt(e.currentTarget.id);favorites.findIndex(t);favorites.splice(),console.log(t)}