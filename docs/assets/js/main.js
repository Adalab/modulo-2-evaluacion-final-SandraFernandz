"use strict";const button=document.querySelector(".js_button"),givenInput=document.querySelector(".js_input"),ulList=document.querySelector(".js_ulList"),ulListFavs=document.querySelector(".js_ulList2");let series=[],favorites=[];function handleConnectTv(e){let i=givenInput.value.toLowerCase();fetch("https://api.tvmaze.com/search/shows?q="+i).then(e=>e.json()).then(e=>{console.log(e),series=e,console.log(series),paintSeries(),setInLocalStorage()})}function paintSeries(){let e="",i="";for(const t of series){i=isFavorite(t)?"main_ulList_container_li_title":"",e+=`<li class= 'listItem js_listItem \n    main_ulList_container_li ${i}' id='${t.show.id}'>`,console.log(t.show.name),e+="<div main_ulList_container_li_div>",e+=`<h2 class='main_ulList_h2'>${t.show.name}</h2>`,t.show.image?e+=`<img src="${t.show.image.original}" class="main_ulList_container_li_img"/>`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="image of series" class="main_ulList_container_li_img">',e+="</div>",e+="</li>"}ulList.innerHTML=e,console.log(e),listenListedSeries()}function listenListedSeries(){const e=document.querySelectorAll(".js_listItem");for(const i of e)i.addEventListener("click",handleList)}function handleList(e){const i=e.currentTarget.id;console.log(e.currentTarget.id);const t=series.find(e=>e.show.id===parseInt(i)),s=favorites.findIndex(e=>e.show.id===parseInt(i));-1===s?favorites.push(t):favorites.splice(s,1),console.log(favorites),paintSeries(),printFavoriteList(),console.log(i),console.log(s)}function isFavorite(e){return void 0!==favorites.find(i=>i.show.id===e.show.id)}function setInLocalStorage(){const e=JSON.stringify(favorites);localStorage.setItem("favorites",e)}function getLocalStorage(){const e=localStorage.getItem("favorites");if(null===e)handleConnectTv();else{const i=JSON.parse(e);favorites=i,printFavoriteList(),paintSeries()}}function printFavoriteList(){let e="";for(const i of favorites)e+=`<li class= 'listItem js_listItem main_ulList_container_li' id='${i.show.id}'>`,e+=`<h2>${i.show.name}</h2>`,console.log(i.show.name),e+="<div main_ulList_container_li_div>",i.show.image?e+=`<img src="${i.show.image.original}" class="main_ulList_container_li_img"/>`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="image of series" class="main_ulList_container_li_img"/>',e+="</div>",e+="</li>";console.log(e),ulListFavs.innerHTML=e,setInLocalStorage()}button.addEventListener("click",handleConnectTv),getLocalStorage();